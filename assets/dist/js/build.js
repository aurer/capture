function addFieldError(e,t){var r=$(e),a=r.parent(),i=a.find(".error"),o=$("<span>",{"class":"error",text:t});i.length?i.text(t):a.append(o)}function removeFieldError(e){$(e).parent().find(".error").remove()}function clearAllErrors(){$(".field .error").remove()}$(function(){$("a.btn").on("click",function(e){e.preventDefault(),$(this).addClass("active").siblings().removeClass("active"),"set"==$(this).data("opt")?$(".opt-custom").addClass("inactive").find("input").attr("disabled",!0):$(".opt-custom").removeClass("inactive").find("input").attr("disabled",!1)}),$("form.shot").submit(function(e){function t(){var e=o[s][0],r=o[s][1],a=i+"&width="+e+"&height="+r,n="/capture.php?"+a,l=$("<div />",{"class":"screenshot loading",width:e,height:r}).appendTo(".output .row");$(".output").animate({scrollTop:l.offset().top},800),$("<img>",{src:n,width:e}).appendTo(l).load(function(){$(this).parent().removeClass("loading"),o[s]&&t()}).error(function(){var e=$(this);e.parent().removeClass("loading").addClass("failed"),e.parent().html("<p>There was a problem generating your screenshot.<br> Please make sure you entered a valid URL.</p>"),e.remove()}),s++}e.preventDefault(),clearAllErrors();var r=$(this),a=$("a[data-opt=custom]").hasClass("active")?"custom":"set";if(""==this.url.value)return addFieldError("input[name=url]","Please enter a valid URL"),void this.url.focus();if("set"==a){var i=r.serialize(),o=["320x600","500x500","700x520","1280x800","1400x1200"],o=[[320,568],[600,1024],[1024,768],[1280,800],[1440,900]],s=0;$(".output .row").empty(),t()}else{if(""==this.width.value||""==this.height.value)return addFieldError("input[name=width]","Please specify a width and height"),void this.width.focus();$(".output .row").empty();var n=$(this).serialize(),l=this.width.value,d=this.height.value,u="/capture.php?"+n,h=$("<div />",{"class":"screenshot loading",width:l,height:d}).appendTo(".output .row");$("<img>",{src:u,width:l}).appendTo(h).load(function(){$(this).parent().removeClass("loading")}).error(function(){$(this).parent().removeClass("loading")})}})});